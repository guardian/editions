stacks: [frontend]
regions: [eu-west-1]

deployments:
    backend:
        type: aws-lambda
        dependencies: [cloudformation]
        parameters:
            prefixStack: false
            bucket: editions-dist
            fileName: backend.zip
            functionNames:
                [editions-preview-backend-, editions-published-backend-]
    archiver:
        type: aws-lambda
        dependencies: [cloudformation]
        parameters:
            prefixStack: false
            bucket: editions-dist
            fileName: archiver.zip
            functionNames:
                [
                    editions-archiver-s3-event-listener-,
                    editions-archiver-stepmachine-issue-,
                    editions-archiver-stepmachine-front-,
                    editions-archiver-stepmachine-image-,
                    editions-archiver-stepmachine-upload-,
                    editions-archiver-stepmachine-deleter-,
                    editions-archiver-stepmachine-event-,
                    editions-archiver-stepmachine-zip-,
                    editions-archiver-stepmachine-indexer-,
                ]
    cloudformation:
        type: cloud-formation
        app: editions
        parameters:
            prependStackToCloudFormationStackName: false
            cloudFormationStackName: editions
            templatePath: cloudformation.yaml
            cloudFormationStackByTags: false
